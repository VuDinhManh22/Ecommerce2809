@page
@{
    Layout = "~/Pages/Shared/_Auth.cshtml";
    ViewBag.Title = "Login";
}

@section scripts {
    <script type="module" src="@Url.Content("/src/Pages/Accounts/Login.js")"></script>
}
<!-- ----------------------------------------------------------------------------
     Developer:      Ismail Hamzah
     Email:         go2ismail@gmail.com
---------------------------------------------------------------------------- -->

<div id="app" v-cloak>
    <!-- Loading Screen -->
    <indoloading v-if="pageLoading"></indoloading>

    <!-- Main Content -->
    <div v-if="!pageLoading" class="mt-5">
        <h1 class="text-center mb-4">
            <a href="/Index" style="color: var(--header-bg);">
                <i class="bi bi-house-fill" style="color: var(--header-bg);"></i>
            </a>
            Login Form
        </h1>
        <form v-on:submit.prevent="handleLoginSubmit" class="mx-auto">
            <div class="mb-3">
                <label for="loginEmail" class="form-label">Email:</label>
                <input type="email" v-model="loginForm.email" id="loginEmail" class="form-control" placeholder="Enter your email" required />
                <div v-if="loginErrors.email" class="text-danger">{{ loginErrors.email }}</div>
            </div>
            <div class="mb-3">
                <label for="loginPassword" class="form-label">Password:</label>
                <input type="password" v-model="loginForm.password" id="loginPassword" class="form-control" placeholder="Enter your password" required />
                <div v-if="loginErrors.password" class="text-danger">{{ loginErrors.password }}</div>
            </div>
            <indobutton type="'submit'"
                        :is-submitting="isSubmitting"
                        submitting-text="Submitting..."
                        default-text="Login"
                        button-class="btn btn-primary w-100 mt-3">
            </indobutton>

            <indobutton type="'button'"
                        default-text="Forgot Password"
                        button-class="btn btn-secondary w-100 mt-3"
                        v-on:click="handleForgotPasswordClick">
            </indobutton>
        </form>

        <!-- Success Message -->
        <div v-if="successMessage" class="alert alert-success mt-4 text-center">
            {{ successMessage }}
        </div>

    </div>
</div>
